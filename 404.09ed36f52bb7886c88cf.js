(self.webpackChunksparkworks_console=self.webpackChunksparkworks_console||[]).push([[404],{95404:function(e,t,n){"use strict";n.r(t),n.d(t,{amplify_amazon_button:function(){return w},amplify_auth0_button:function(){return v},amplify_facebook_button:function(){return y},amplify_google_button:function(){return _},amplify_oauth_button:function(){return b}});var i=n(16304),r=n(31112),a=n(41998),o=n(88774),u=n.n(o),s=n(65513),c=n(6860),h=n(53799),f=n(82073),d=n(33542),g=n(30031),l=n(68513),p=n(10027),m=new c.k("amplify-amazon-button"),w=function(){function e(t){var n=this;(0,r.Z)(this,e),(0,s.r)(this,t),this.handleAuthStateChange=p.d,this.federatedSignIn=function(e){var t=e.access_token,r=e.expires_in;if(t){if(!d.g||"function"!=typeof d.g.federatedSignIn||"function"!=typeof d.g.currentAuthenticatedUser)throw new Error(l.N);var a=1e3*r+(new Date).getTime();window.amazon.Login.retrieveProfile(function(){var e=(0,i.Z)(u().mark(function e(i){var r;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.success){e.next=2;break}return e.abrupt("return",m.debug("Get user Info failed"));case 2:return r={name:i.profile.Name,email:i.profile.PrimaryEmail},e.next=5,d.g.federatedSignIn("amazon",{token:t,expires_at:a},r);case 5:return e.next=7,d.g.currentAuthenticatedUser();case 7:n.handleAuthStateChange(f.A.SignedIn,e.sent);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}}}return(0,a.Z)(e,[{key:"signInWithAmazon",value:function(e){var t=this;e.preventDefault(),window.amazon.Login.setClientId(this.clientId),window.amazon.Login.authorize({scope:"profile"},function(e){if(e.error)return m.debug("Failed to login with amazon: "+e.error);try{window.localStorage.setItem(l.j,JSON.stringify({provider:"amazon"}))}catch(n){m.debug("Failed to cache auth source into localStorage",n)}t.federatedSignIn(e)})}},{key:"render",value:function(){var e=this;return(0,s.h)("amplify-sign-in-button",{onClick:function(t){return e.signInWithAmazon(t)},provider:"amazon"},(0,s.h)("script",{src:"https://assets.loginwithamazon.com/sdk/na/login1.js"}),h.o.get(g.T.SIGN_IN_WITH_AMAZON))}}]),e}(),I=new c.k("amplify-auth0-button"),v=function(){function e(t){var n=this;(0,r.Z)(this,e),(0,s.r)(this,t),this.handleAuthStateChange=p.d,this.handleLoad=function(){var e=d.g.configure().oauth,t=n.config,r=void 0===t?(void 0===e?{}:e).auth0:t;r?(I.debug("auth0 configuration",r),n._auth0||(n._auth0=new window.auth0.WebAuth(r)),n._auth0.parseHash(function(e,t){if(e)I.debug("Failed to parse the url for Auth0",e);else if(t){var a={provider:"auth0",opts:{returnTo:r.returnTo,clientID:r.clientID,federated:r.federated}};try{localStorage.setItem(l.j,JSON.stringify(a))}catch(o){I.debug("Failed to cache auth source into localStorage",o)}n._auth0.client.userInfo(t.accessToken,function(){var e=(0,i.Z)(u().mark(function e(i,a){var o,s;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0,s=void 0,i?I.debug("Failed to get the user info",i):(o=a.name,s=a.email),e.next=5,d.g.federatedSignIn(r.domain,{token:t.idToken,expires_at:1e3*t.expiresIn+(new Date).getTime()},{name:o,email:s});case 5:return e.next=7,d.g.currentAuthenticatedUser();case 7:n.handleAuthStateChange(f.A.SignedIn,e.sent);case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}())}else I.debug("Auth0 found no authResult in hash")})):I.debug("Auth0 is not configured")}}return(0,a.Z)(e,[{key:"signInWithAuth0",value:function(e){if(e.preventDefault(),!this._auth0)throw new Error("the auth0 client is not configured");this._auth0.authorize()}},{key:"render",value:function(){var e=this;return(0,s.h)("amplify-sign-in-button",{onClick:function(t){return e.signInWithAuth0(t)},provider:"auth0"},(0,s.h)("script",{onLoad:this.handleLoad,src:"https://cdn.auth0.com/js/auth0/9.11/auth0.min.js"}),h.o.get(g.T.SIGN_IN_WITH_AUTH0))}}]),e}(),k=new c.k("amplify-facebook-button"),y=function(){function e(t){var n=this;(0,r.Z)(this,e),(0,s.r)(this,t),this.handleAuthStateChange=p.d,this.federatedSignIn=function(e){var t=e.accessToken,r=e.expiresIn;if(t){if(!d.g||"function"!=typeof d.g.federatedSignIn||"function"!=typeof d.g.currentAuthenticatedUser)throw new Error(l.N);var a=1e3*r+(new Date).getTime();window.FB.api("/me",{fields:"name,email"},function(){var e=(0,i.Z)(u().mark(function e(i){var r;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={name:i.name,email:i.email},e.next=3,d.g.federatedSignIn("facebook",{token:t,expires_at:a},r);case 3:return e.next=5,d.g.currentAuthenticatedUser();case 5:n.handleAuthStateChange(f.A.SignedIn,e.sent);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}},this.getLoginStatus=function(){window.FB.getLoginStatus(function(e){try{window.localStorage.setItem(l.j,JSON.stringify({provider:"facebook"}))}catch(t){k.debug("Failed to cache auth source into localStorage",t)}if("connected"===e.status)return n.federatedSignIn(e.authResponse);n.login()})},this.login=function(){window.FB.login(function(e){e&&e.authResponse&&n.federatedSignIn(e.authResponse)},{scope:"public_profile,email"})}}return(0,a.Z)(e,[{key:"signInWithFacebook",value:function(e){e.preventDefault(),window.FB.init({appId:this.appId,cookie:!0,xfbml:!1,version:"v5.0"}),this.getLoginStatus()}},{key:"render",value:function(){var e=this;return(0,s.h)("amplify-sign-in-button",{onClick:function(t){return e.signInWithFacebook(t)},provider:"facebook"},(0,s.h)("script",{async:!0,defer:!0,src:"https://connect.facebook.net/en_US/sdk.js"}),h.o.get(g.T.SIGN_IN_WITH_FACEBOOK))}}]),e}(),S=new c.k("amplify-google-button"),_=function(){function e(t){var n=this;(0,r.Z)(this,e),(0,s.r)(this,t),this.handleAuthStateChange=p.d,this.handleError=function(e){console.error(e)},this.handleLoad=function(){window.gapi.load("auth2")},this.handleUser=function(){var e=(0,i.Z)(u().mark(function e(t){var i,r,a,o,s;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.g&&"function"==typeof d.g.federatedSignIn&&"function"==typeof d.g.currentAuthenticatedUser){e.next=2;break}throw new Error(l.N);case 2:try{window.localStorage.setItem(l.j,JSON.stringify({provider:"google"}))}catch(u){S.debug("Failed to cache auth source into localStorage",u)}return i=t.getAuthResponse(),r=i.id_token,a=i.expires_at,o=t.getBasicProfile(),e.next=7,d.g.federatedSignIn("google",{token:r,expires_at:a},{email:o.getEmail(),name:o.getName(),picture:o.getImageUrl()});case 7:return e.next=9,d.g.currentAuthenticatedUser();case 9:s=e.sent;try{n.handleAuthStateChange(f.A.SignedIn,s)}catch(c){n.handleError(c)}case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}return(0,a.Z)(e,[{key:"getAuthInstance",value:function(){return window.gapi&&window.gapi.auth2?window.gapi.auth2.getAuthInstance()||window.gapi.auth2.init({client_id:this.clientId,cookiepolicy:"single_host_origin",scope:"profile email openid"}):null}},{key:"signInWithGoogle",value:function(e){e.preventDefault(),this.getAuthInstance().signIn().then(this.handleUser).catch(this.handleError)}},{key:"render",value:function(){var e=this;return(0,s.h)("amplify-sign-in-button",{onClick:function(t){return e.signInWithGoogle(t)},provider:"google"},(0,s.h)("script",{onLoad:this.handleLoad,src:"https://apis.google.com/js/api:client.js"}),h.o.get(g.T.SIGN_IN_WITH_GOOGLE))}}]),e}(),b=function(){function e(t){(0,r.Z)(this,e),(0,s.r)(this,t),this.config={}}return(0,a.Z)(e,[{key:"signInWithOAuth",value:function(e){e.preventDefault(),d.g.federatedSignIn()}},{key:"render",value:function(){var e=this;return(0,s.h)("amplify-sign-in-button",{onClick:function(t){return e.signInWithOAuth(t)},provider:"oauth"},this.config.label||h.o.get(g.T.SIGN_IN_WITH_AWS))}}]),e}()}}]);
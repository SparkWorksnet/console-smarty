(self.webpackChunksparkworks_console=self.webpackChunksparkworks_console||[]).push([[806],{7806:function(e,t,s){"use strict";s.r(t),s.d(t,{amplify_select_mfa_type:function(){return A}});var i=s(16304),n=s(31112),a=s(41998),h=s(88774),u=s.n(h),l=s(65513),r=s(6860),o=s(53799),T=s(82073),M=s(33542),c=s(30031),d=s(68513),S=new r.k("SelectMFAType"),A=function(){function e(t){var s=this;(0,n.Z)(this,e),(0,l.r)(this,t),this.handleSubmit=function(e){return s.verify(e)},this.TOTPSetup=!1,this.selectMessage=null,this.MFAMethod=null,this.isTOTP=!1,this.isNoMFA=!1,this.isSMS=!1,this.loading=!1,this.isToastVisible=!1}var t;return(0,a.Z)(e,[{key:"handleRadioButtonChange",value:function(e){this.TOTPSetup=!1,this.selectMessage=null,this.isNoMFA=!1,this.isTOTP=!1,this.isSMS=!1,this.isToastVisible=!1;var t=e.target,s=t.value,i=t.checked,n=["radio","checkbox"].includes(t.type);s===T.M.SMS&&n&&(this.isSMS=i),s===T.M.TOTP&&n&&(this.isTOTP=i),s===T.M.NOMFA&&n&&(this.isNoMFA=i)}},{key:"verify",value:(t=(0,i.Z)(u().mark(function e(t){var s,i;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),S.debug("MFA Type Values",{TOTP:this.isTOTP,SMS:this.isSMS,"No MFA":this.isNoMFA}),this.isTOTP?this.MFAMethod=T.M.TOTP:this.isSMS?this.MFAMethod=T.M.SMS:this.isNoMFA&&(this.MFAMethod=T.M.NOMFA),s=this.authData,M.g&&"function"==typeof M.g.setPreferredMFA){e.next=6;break}throw new Error(d.N);case 6:return this.loading=!0,e.prev=7,e.next=10,M.g.setPreferredMFA(s,this.MFAMethod);case 10:S.debug("Set Preferred MFA Succeeded",e.sent),this.selectMessage="".concat(o.o.get(c.T.SUCCESS_MFA_TYPE)," ").concat(this.MFAMethod),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),(i=e.t0.message)===d.f||i===d.g?(this.TOTPSetup=!0,this.selectMessage=o.o.get(c.T.SETUP_TOTP_REQUIRED)):(S.debug("Set Preferred MFA failed",e.t0),this.selectMessage=o.o.get(c.T.UNABLE_TO_SETUP_MFA_AT_THIS_TIME));case 19:return e.prev=19,this.loading=!1,this.isToastVisible=!0,e.finish(19);case 23:case"end":return e.stop()}},e,this,[[7,15,19,23]])})),function(e){return t.apply(this,arguments)})},{key:"contentBuilder",value:function(){var e=this;if(!this.MFATypes||Object.keys(this.MFATypes).length<2)return S.debug(o.o.get(c.T.LESS_THAN_TWO_MFA_VALUES_MESSAGE)),(0,l.h)("div",null,(0,l.h)("a",null,o.o.get(c.T.LESS_THAN_TWO_MFA_VALUES_MESSAGE)));var t=this.MFATypes,s=t.SMS,i=t.TOTP,n=t.Optional;return(0,l.h)("amplify-form-section",{submitButtonText:o.o.get(c.T.SELECT_MFA_TYPE_SUBMIT_BUTTON_TEXT),headerText:o.o.get(c.T.SELECT_MFA_TYPE_HEADER_TEXT),handleSubmit:function(t){return e.handleSubmit(t)},loading:this.loading},s?(0,l.h)("amplify-radio-button",{key:"sms",name:"MFAType",value:"SMS",label:"SMS",handleInputChange:function(t){return e.handleRadioButtonChange(t)}}):null,i?(0,l.h)("amplify-radio-button",{key:"totp",name:"MFAType",value:"TOTP",label:"TOTP",handleInputChange:function(t){return e.handleRadioButtonChange(t)}}):null,n?(0,l.h)("amplify-radio-button",{key:"noMFA",name:"MFAType",value:"NOMFA",label:"No MFA",handleInputChange:function(t){return e.handleRadioButtonChange(t)}}):null)}},{key:"renderToast",value:function(){var e=this;return this.isToastVisible&&this.selectMessage?(0,l.h)("amplify-toast",{message:this.selectMessage,handleClose:function(){e.selectMessage=null,e.isToastVisible=!1}}):null}},{key:"render",value:function(){return(0,l.h)("div",null,this.contentBuilder(),this.TOTPSetup?(0,l.h)("amplify-totp-setup",{user:this.authData}):null,this.renderToast())}}]),e}()}}]);